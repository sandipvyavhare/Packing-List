<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Packing List Generator</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
<div class="container">
    <div id="companyRefresh" class="header-refresh" title="Click to refresh the page">
        QUALITY MEDIGEN PHARMACEUTICALS
    </div>
    <section class="search-section">
        <h2>Saved Products &amp; Batches</h2>
        <div class="search-row">
            <input id="dbSearchInput" class="db-search-input" placeholder="Search product or batch..." autocomplete="off" />
            <button id="dbSearchBtn" class="btn btn-primary" type="button">Search</button>
        </div>
        <div id="databaseList" class="database-list"></div>
    </section>
    <section class="search-section">
        <h2>Search Packing Lists</h2>
        <div class="search-row">
            <input id="plSearchInput" class="db-search-input" placeholder="Search packing list no... (e.g., QMP/PL/25-26/001)" autocomplete="off" />
            <button id="plSearchBtn" class="btn btn-primary" type="button">Search</button>
        </div>
        <div id="packingListResults" class="database-list"></div>
    </section>
    <hr />
    <section id="add-edit-section" class="add-edit-section">
        <h2>Add / Edit Product &amp; Batches</h2>
        <form id="productBatchForm" class="product-form" autocomplete="off">
            <div class="form-row">
                <label for="productName">Name of Product</label>
                <input id="productName" type="text" required />
            </div>
            <div class="form-row">
                <label for="mfgDate">MFG Date</label>
                <input id="mfgDate" type="month" required />
            </div>
            <div class="form-row">
                <label for="expDate">EXP Date</label>
                <input id="expDate" type="month" required />
            </div>
            <div class="form-row">
                <label for="quantityPerBox">Quantity per Box</label>
                <input id="quantityPerBox" type="text" placeholder="e.g., 20x5x10x1x10" required />
            </div>
            <div class="form-row">
                <label for="grossWeight">Gross Weight (kg/Box)</label>
                <input id="grossWeight" type="number" step="0.001" required />
            </div>
            <div class="form-row">
                <label for="netWeight">Net Weight (kg/Box)</label>
                <input id="netWeight" type="number" step="0.001" required />
            </div>
            <div class="form-row">
                <label for="shippingMarks">Shipping Marks</label>
                <input id="shippingMarks" type="text" />
            </div>
            <div class="form-row">
                <label for="shipperSize">Shipper Size</label>
                <input id="shipperSize" type="text" placeholder="e.g., 660X350X375 MM" />
            </div>
            <div class="batch-section">
                <label>Batches for this Product</label>
                <table id="batchTable" class="batch-table">
                    <thead>
                        <tr>
                            <th>Batch No.</th>
                            <th>Box From</th>
                            <th>Box To</th>
                            <th>Remove</th>
                        </tr>
                    </thead>
                    <tbody>
                    <!-- JS renders batch rows here -->
                    </tbody>
                </table>
                <button id="addBatchBtn" type="button" class="btn btn-secondary mt-15">+ Add Batch</button>
            </div>
            <div class="form-actions">
                <input type="hidden" id="editProductId" />
                <button id="saveProductBtn" type="submit" class="btn btn-primary">Save Product & Batches</button>
                <button id="cancelEditBtn" type="button" class="btn btn-danger" style="display:none;">Cancel Edit</button>
            </div>
        </form>
    </section>
    <hr />
    <section>
        <h2>Generate Packing List (Selective Dispatch)</h2>
        <form id="generatePLForm" class="generate-pl-form">
            <div class="form-row">
                <label for="plProductSelect">Select Product</label>
                <select id="plProductSelect" required>
                    <option value="">-- Select a Product --</option>
                </select>
            </div>
            <div id="availableBatchesWrap" class="available-batches"></div>
            <div class="form-actions">
                <button id="generatePlBtn" type="submit" class="btn btn-primary">Generate & Preview</button>
            </div>
        </form>
    </section>
</div>
<!-- Preview Modal -->
<div id="previewModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="previewTitle">
    <div class="modal-content">
        <button class="close-btn" aria-label="Close modal">&times;</button>
        <h2 id="previewTitle">Packing List Preview</h2>
        <div id="packingListPreview">
            <!-- Packing list content inserted here -->
        </div>
        <button id="savePdfBtn" class="btn btn-primary mt-20">Save as PDF</button>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="main.js"></script>
</body>
</html>
